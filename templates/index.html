<!DOCTYPE html>
<html>
    <title>Twitter sentiment analysis by keywords</title>
    <head>
        <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.1.3/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-1BmE4kWBq78iYhFldvKuhfTAU6auU8tT94WrHftjDbrCEXSU1oBoqyl2QvZ6jIW3" crossorigin="anonymous">
        </style>
        <script type="text/javascript" 
                src="https://code.jquery.com/jquery-1.10.2.js">
        </script>
        <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.1.3/dist/js/bootstrap.bundle.min.js" integrity="sha384-ka7Sk0Gln4gmtz2MlQnikT1wXgYsOg+OMhuP+IlRH9sENBO0LRn5q+8nbTov4+1p" crossorigin="anonymous"></script>
        <script>
            $(document).ready(function(){
                $('#btn').click(function() {
                        var keyword1=$('#keyword1').val();
                        var keyword2=$('#keyword2').val();

                        if(keyword1!='') {
                        $.ajax({
                            url: "/tweets?keyword="+keyword1
                        }).then(function(data) {
                        var sum = data['positives'] + data['negatives']
                        var positivity1=data['positives']/sum;
                        var negativity1=data['negatives']/sum;
                        var neutral1=0;    
                        $('#keyword1title').text("Keyword 1:"+keyword1+" analysis for negative, neutral and positive tweets");
                        $('#positive1').text("Positive:"+positivity1+"%");
                        $('#neutral1').text("Neutral:"+neutral1+"%");
                        $('#negative1').text("Negative:"+negativity1+"%");
                        $( "#progressbar1_negative" ).width(negativity1+"%");
                        $( "#progressbar1_neutral" ).width(neutral1+"%");
                        $( "#progressbar1_positive" ).width(positivity1+"%");
                        })};
                        if(keyword2!='') {
                        $.ajax({
                            url: "/tweets?keyword="+keyword2
                        }).then(function(data) {
                        var sum = data['positives'] + data['negatives']
                        var positivity2=data['positives']/sum;
                        var negativity2=data['negatives']/sum;
                        var neutral2=0;    
                        $('#keyword2title').text("Keyword 2:"+keyword2+" analysis for negative, neutral and positive tweets");
                        $('#positive2').text("Positive:"+positivity2+"%");
                        $('#neutral2').text("Neutral:"+neutral2+"%");
                        $('#negative2').text("Negative:"+negativity2+"%");
                        $( "#progressbar2_negative" ).width(negativity2+"%");
                        $( "#progressbar2_neutral" ).width(neutral2+"%");
                        $( "#progressbar2_positive" ).width(positivity2+"%");
                
                        })};
                    }); 

                    $('#tweetanalysis').click(function() {
                        var tweet=$('#tweetTextarea1').val();
                        if(tweet!='') {
                        $.ajax({
                            url: "/text?text="+tweet//"https://reqres.in/api/users?page=2"
                        }).then(function(data) {
                            var tweetanalysisresult=data;
                            if(tweetanalysisresult<0){
                                var result='Negative'
                                $('#tweetanalysis').removeClass("btn-dark").addClass("btn-danger");
                                $('#tweetanalysis').val(result);
                                setTimeout(setDefault, 3000);
                            }else{
                                var result='Positive'
                                $('#tweetanalysis').removeClass("btn-dark").addClass("btn-primary");
                                $('#tweetanalysis').val(result);
                                setTimeout(setDefault, 3000);
                            }
                        })};
                     }); 

            });
            function setDefault() {
                $('#tweetanalysis').removeClass("btn-danger").removeClass("btn-primary").addClass("btn-dark");
                            $('#tweetanalysis').val("Analyze");
            }
        </script>   
        <style>
            .parent {
                width: 100%;
                
                }
                .child {
                    float: left; 
                    width: 50%; 
                }
        </style>
    </head>
<!-- 
    read about bootstrap: https://getbootstrap.com/docs/5.1/getting-started/introduction/
    read about jquery: https://www.tutorialrepublic.com/jquery-tutorial/jquery-getter-and-setter.php
    KNOB - https://github.com/andrepxx/pure-knob/archive/master.zip
-->
    <body>

        <ul class="nav nav-pills mb-3" id="pills-tab" role="tablist">
            <li class="nav-item" role="presentation">
              <button class="nav-link active" id="pills-home-tab" data-bs-toggle="pill" data-bs-target="#pills-home" type="button" role="tab" aria-controls="pills-home" aria-selected="true">Twitter analysis</button>
            </li>
            <li class="nav-item" role="presentation">
              <button class="nav-link" id="pills-profile-tab" data-bs-toggle="pill" data-bs-target="#pills-profile" type="button" role="tab" aria-controls="pills-profile" aria-selected="false">Tweet analysis</button>
            </li>
          </ul>
              <div class="tab-content" id="pills-tabContent">
                <!-- Twitter analysis-->
                <div  class="tab-pane fade show active" id="pills-home" role="tabpanel" aria-labelledby="pills-home-tab" style="padding-left: 100px;">
                    <p></p>
                    <h1><span class="badge badge-secondary" style="color:grey">Twitter tweets keyword sentiment analysis</span></h1>
                    <p></p>
                    <p>Keyword 1: <input id="keyword1" type="text"></input></p>
                    <p>Keyword 2: <input id="keyword2" type="text"></input></p>
                    <p><input id="btn" class="btn btn-dark"type="button" value="Analyze" /></p>
                    <!--Keyword1 analysis-->
                    <h1><span id="keyword1title" class="badge badge-secondary" style="color:grey">Keyword 1 analysis</span></h1>
                    <button id="negative1" type="button" class="btn btn-danger">
                        Negative <span class="badge badge-danger"></span>
                    </button>
                    <button id="neutral1" type="button" class="btn btn-secondary">
                        Neutral <span class="badge badge-secondary"></span>
                    </button>
                    <button id="positive1" type="button" class="btn btn-primary">
                        Positive <span class="badge badge-primary"></span>
                    </button>
                    <p></p>
                    <div class="progress" style="width:50%">
                        <div id="progressbar1_negative" class="progress-bar" role="progressbar" style="width: 0%" aria-valuenow="15" aria-valuemin="0" aria-valuemax="100"></div>
                        <div id="progressbar1_neutral" class="progress-bar bg-success" role="progressbar" style="width: 0%" aria-valuenow="30" aria-valuemin="0" aria-valuemax="100"></div>
                        <div id="progressbar1_positive" class="progress-bar bg-info" role="progressbar" style="width: 0%" aria-valuenow="20" aria-valuemin="0" aria-valuemax="100"></div>
                    </div>
                    <p></p>
                    <h1><span id="keyword2title" class="badge badge-secondary" style="color:grey">Keyword 2 analysis</span></h1>
                        <button id="negative2" type="button" class="btn btn-danger">
                            Negative <span class="badge badge-danger"></span>
                        </button>
                        <button id="neutral2" type="button" class="btn btn-secondary">
                            Neutral <span class="badge badge-secondary"></span>
                        </button>
                        <button id="positive2" type="button" class="btn btn-primary">
                            Positive <span class="badge badge-primary"></span>
                        </button>
                        <p></p>
                        <div class="progress" style="width:50%">
                            <div id="progressbar2_negative" class="progress-bar" role="progressbar" style="width: 0%" aria-valuenow="15" aria-valuemin="0" aria-valuemax="100"></div>
                            <div id="progressbar2_neutral" class="progress-bar bg-success" role="progressbar" style="width: 0%" aria-valuenow="30" aria-valuemin="0" aria-valuemax="100"></div>
                            <div id="progressbar2_positive" class="progress-bar bg-info" role="progressbar" style="width: 0%" aria-valuenow="20" aria-valuemin="0" aria-valuemax="100"></div>
                        </div>
                    <p>&nbsp;</p>

                </div>
                <!-- Tweet analysis-->
                <div class="tab-pane fade" id="pills-profile" role="tabpanel" aria-labelledby="pills-profile-tab">
                
                    <div style="padding-left: 100px; ">
                        <div>
                            <p>&nbsp;</p>
                            <label for="tweetTextarea1" class="form-label">Tweet</label><p></p>
                            <textarea class="form-control" id="tweetTextarea1" style="width:80%" rows="4"></textarea>
                            <p>&nbsp;</p>
                            <p><input id="tweetanalysis" class="btn btn-dark"type="button" value="Analyze" /></p>
                            <p></p>

                            <p>&nbsp;</p>
                        </div>
                        <div id="tweetresult"><p>&nbsp;</p>

                            <p></p>
                        </div>
                    </div>
                
                
                </div>
            
            </div>

    </body>
</html>